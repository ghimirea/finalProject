{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SIGNUP_SUCCESS, SIGNUP_FAIL, GET_USER, AUTH_ERROR, SIGNIN_SUCCESS, SIGNIN_FAIL, SIGNOUT } from \"../Action/types\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\n\nvar getToken = function getToken() {\n  return _regeneratorRuntime.async(function getToken$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar setToken = function setToken(data) {\n  return _regeneratorRuntime.async(function setToken$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('token', data));\n\n        case 2:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar removeToken = function removeToken() {\n  return _regeneratorRuntime.async(function removeToken$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.removeItem('token'));\n\n        case 2:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar initialState = {\n  token: getToken(),\n  isAuth: null,\n  isLoading: null,\n  user: null\n};\n\nvar authetication = function authetication() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      payload = action.payload;\n\n  switch (type) {\n    case SIGNUP_SUCCESS:\n    case SIGNIN_SUCCESS:\n      setToken(payload);\n      console.log('Token--->', payload);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        payload: payload,\n        isAuth: true,\n        isLoading: false\n      });\n\n    case SIGNUP_FAIL:\n    case AUTH_ERROR:\n    case SIGNIN_FAIL:\n    case SIGNOUT:\n      removeToken();\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: null,\n        isAuth: false,\n        isLoading: false\n      });\n\n    case GET_USER:\n      console.log('GET USER--->', payload);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuth: true,\n        isLoading: false,\n        user: payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default authetication;","map":{"version":3,"sources":["/Users/ashimsmac/Desktop/MUM/Final_Project/final-porject-ghimirea/mobileclient/components/Reducer/auth.js"],"names":["SIGNUP_SUCCESS","SIGNUP_FAIL","GET_USER","AUTH_ERROR","SIGNIN_SUCCESS","SIGNIN_FAIL","SIGNOUT","getToken","AsyncStorage","getItem","setToken","data","setItem","removeToken","removeItem","initialState","token","isAuth","isLoading","user","authetication","state","action","type","payload","console","log"],"mappings":";;;;;;;AAAA,SACEA,cADF,EAEEC,WAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,cALF,EAMEC,WANF,EAOEC,OAPF;;;AAWA,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACFC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADE;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB;;AAIA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACFH,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8BD,IAA9B,CADE;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB;;AAIA,IAAME,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACLL,YAAY,CAACM,UAAb,CAAwB,OAAxB,CADK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAApB;;AAIA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAET,QAAQ,EADI;AAEnBU,EAAAA,MAAM,EAAE,IAFW;AAGnBC,EAAAA,SAAS,EAAE,IAHQ;AAInBC,EAAAA,IAAI,EAAE;AAJa,CAArB;;AAOA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAkC;AAAA,MAAjCC,KAAiC,uEAAzBN,YAAyB;AAAA,MAAXO,MAAW;AAAA,MAC9CC,IAD8C,GAC5BD,MAD4B,CAC9CC,IAD8C;AAAA,MACxCC,OADwC,GAC5BF,MAD4B,CACxCE,OADwC;;AAGtD,UAAQD,IAAR;AACE,SAAKvB,cAAL;AACA,SAAKI,cAAL;AACEM,MAAAA,QAAQ,CAACc,OAAD,CAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBF,OAAzB;AACA,6CACKH,KADL;AAEEG,QAAAA,OAAO,EAAPA,OAFF;AAGEP,QAAAA,MAAM,EAAE,IAHV;AAIEC,QAAAA,SAAS,EAAE;AAJb;;AAOF,SAAKjB,WAAL;AACA,SAAKE,UAAL;AACA,SAAKE,WAAL;AACA,SAAKC,OAAL;AACEO,MAAAA,WAAW;AACX,6CACKQ,KADL;AAEEL,QAAAA,KAAK,EAAE,IAFT;AAGEC,QAAAA,MAAM,EAAE,KAHV;AAIEC,QAAAA,SAAS,EAAE;AAJb;;AAMF,SAAKhB,QAAL;AACEuB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,OAA5B;AACA,6CACKH,KADL;AAEEJ,QAAAA,MAAM,EAAE,IAFV;AAGEC,QAAAA,SAAS,EAAE,KAHb;AAIEC,QAAAA,IAAI,EAAEK;AAJR;;AAMF;AACE,aAAOH,KAAP;AAhCJ;AAkCD,CArCD;;AAuCA,eAAeD,aAAf","sourcesContent":["import {\n  SIGNUP_SUCCESS,\n  SIGNUP_FAIL,\n  GET_USER,\n  AUTH_ERROR,\n  SIGNIN_SUCCESS,\n  SIGNIN_FAIL,\n  SIGNOUT,\n} from '../Action/types';\nimport { AsyncStorage } from 'react-native';\n\nconst getToken = async () => {\n  return await AsyncStorage.getItem('token');\n};\n\nconst setToken = async (data) => {\n  return await AsyncStorage.setItem('token', data);\n};\n\nconst removeToken = async () => {\n  return await AsyncStorage.removeItem('token');\n};\n\nconst initialState = {\n  token: getToken(),\n  isAuth: null,\n  isLoading: null,\n  user: null,\n};\n\nconst authetication = (state = initialState, action) => {\n  const { type, payload } = action;\n\n  switch (type) {\n    case SIGNUP_SUCCESS:\n    case SIGNIN_SUCCESS:\n      setToken(payload);\n      console.log('Token--->', payload);\n      return {\n        ...state,\n        payload,\n        isAuth: true,\n        isLoading: false,\n      };\n\n    case SIGNUP_FAIL:\n    case AUTH_ERROR:\n    case SIGNIN_FAIL:\n    case SIGNOUT:\n      removeToken();\n      return {\n        ...state,\n        token: null,\n        isAuth: false,\n        isLoading: false,\n      };\n    case GET_USER:\n      console.log('GET USER--->', payload);\n      return {\n        ...state,\n        isAuth: true,\n        isLoading: false,\n        user: payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default authetication;\n"]},"metadata":{},"sourceType":"module"}